(function(){"use strict";var t={8768:function(t,e,a){var i=a(9242),o=a(8125),n=a(2274),r=a(8321),s=a(7749),d=a(3396);const c={class:"app"},l=(0,d.Uk)(" Settings "),u={key:1};function m(t,e,a,i,o,n){const r=(0,d.up)("my-button"),s=(0,d.up)("card-list"),m=(0,d.up)("card-list-small"),h=(0,d.up)("card-form"),p=(0,d.up)("my-dialog");return(0,d.wg)(),(0,d.iD)("div",c,[(0,d.Wm)(r,{onClick:n.showDialog},{default:(0,d.w5)((()=>[l])),_:1},8,["onClick"]),o.isLoading?((0,d.wg)(),(0,d.iD)("div",u,"Loading...")):((0,d.wg)(),(0,d.j4)(s,{key:0,cards:o.cards,onRemove:n.removeCity},null,8,["cards","onRemove"])),(0,d.Wm)(p,{show:o.dialogVisible,"onUpdate:show":e[0]||(e[0]=t=>o.dialogVisible=t)},{default:(0,d.w5)((()=>[(0,d.Wm)(m,{cards:o.cards,onRemove:n.removeCity,onResort:n.resortCity},null,8,["cards","onRemove","onResort"]),(0,d.Wm)(h,{onAddNewCity:this.fetchWeather},null,8,["onAddNewCity"])])),_:1},8,["show"])])}a(1703);var h=a(6265),p=a.n(h);const f={key:0};function g(t,e,a,o,n,r){const s=(0,d.up)("card-item");return a.cards.length>0?((0,d.wg)(),(0,d.iD)("div",f,[(0,d.Wm)(i.W3,{name:"card-list"},{default:(0,d.w5)((()=>[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(a.cards,(e=>((0,d.wg)(),(0,d.j4)(s,{card:e,key:e.id,onRemove:a=>t.$emit("remove",e)},null,8,["card","onRemove"])))),128))])),_:1})])):(0,d.kq)("",!0)}var v=a(7139);const y=t=>((0,d.dD)("data-v-13961514"),t=t(),(0,d.Cn)(),t),w={class:"weatherCard"},_={class:"tempCard"},b={class:"location"},C={class:"temp"},k={class:"location"},D={class:"descCard",cellpadding:"0",cellspacing:"0"},L=y((()=>(0,d._)("td",{id:"firstcol"},"Feels like:",-1))),I={id:"secondcol"},S=y((()=>(0,d._)("td",{id:"thirdcol"},"Pressure:",-1))),W={id:"forescol"},O=y((()=>(0,d._)("td",{id:"firstcol"},"Temp max:",-1))),z={id:"secondcol"},V=y((()=>(0,d._)("td",{id:"thirdcol"},"Wind:",-1))),j={id:"forescol"},x=y((()=>(0,d._)("td",{id:"firstcol"},"Temp min:",-1))),$={id:"secondcol"},M=y((()=>(0,d._)("td",{id:"thirdcol"},"Clouds:",-1))),P={id:"forescol"},R=y((()=>(0,d._)("td",{id:"firstcol"},"Humidity:",-1))),Z={id:"secondcol"},A=y((()=>(0,d._)("td",{id:"thirdcol"},"Visibility:",-1))),q={id:"forescol"};function N(t,e,a,i,o,n){return(0,d.wg)(),(0,d.iD)("div",w,[(0,d._)("span",{onClick:e[0]||(e[0]=e=>t.$emit("remove",a.card)),class:"card_btns","aria-hidden":"true"}," ✕ "),(0,d._)("div",_,[(0,d._)("div",b,(0,v.zw)(a.card.city)+" - "+(0,v.zw)(a.card.data.sys.country),1),(0,d._)("div",C,(0,v.zw)(a.card.data.main.temp)+" °c ",1),(0,d._)("div",k,(0,v.zw)(a.card.data.weather[0].description),1)]),(0,d._)("table",D,[(0,d._)("tbody",null,[(0,d._)("tr",null,[L,(0,d._)("td",I,(0,v.zw)(a.card.data.main.feels_like)+" °C",1),S,(0,d._)("td",W,(0,v.zw)(a.card.data.main.pressure)+" hPa",1)]),(0,d._)("tr",null,[O,(0,d._)("td",z,(0,v.zw)(a.card.data.main.temp_max)+" °C",1),V,(0,d._)("td",j,(0,v.zw)(a.card.data.wind.speed)+" m/s",1)]),(0,d._)("tr",null,[x,(0,d._)("td",$,(0,v.zw)(a.card.data.main.temp_min)+" °C",1),M,(0,d._)("td",P,(0,v.zw)(a.card.data.clouds.all),1)]),(0,d._)("tr",null,[R,(0,d._)("td",Z,(0,v.zw)(a.card.data.main.humidity)+" %",1),A,(0,d._)("td",q,(0,v.zw)(a.card.data.visibility)+" m",1)])])])])}var T={props:{card:{type:Object,required:!0}}},E=a(89);const U=(0,E.Z)(T,[["render",N],["__scopeId","data-v-13961514"]]);var F=U,G={components:{cardItem:F},props:{cards:{type:Array,required:!0}}};const H=(0,E.Z)(G,[["render",g],["__scopeId","data-v-60297076"]]);var J=H;const B={class:"list"},K={class:"itemList"},Y={class:"text"};function Q(t,e,a,o,n,r){const s=(0,d.up)("fa"),c=(0,d.up)("draggable");return(0,d.wg)(),(0,d.iD)("div",B,[(0,d.Wm)(c,{list:a.cards,tag:"ul",class:"list-group",handle:".handle","item-key":"id"},{item:(0,d.w5)((({element:t,index:a})=>[(0,d._)("li",K,[(0,d.Wm)(s,{icon:"fa-solid fa-bars",class:"faIcon handle",onDrop:r.resorted,onDargenter:e[0]||(e[0]=(0,i.iM)((()=>{}),["prevent"])),onDragover:e[1]||(e[1]=(0,i.iM)((()=>{}),["prevent"]))},null,8,["onDrop"]),(0,d._)("span",Y,(0,v.zw)(t.city),1),(0,d.Wm)(s,{icon:"fa-regular fa-trash-can",class:"faIcon trash",onClick:e=>r.removeAt(a,t)},null,8,["onClick"])])])),_:1},8,["list"])])}var X=a(6983),tt=a.n(X),et={props:{cards:{type:Array,required:!0}},name:"handle",display:"Handle",instruction:"Drag using the handle icon",order:5,components:{draggable:tt()},methods:{removeAt(t,e){this.cards.splice(t,1),this.$emit("remove",e)},resorted(){this.$emit("resort",this.cards)}}};const at=(0,E.Z)(et,[["render",Q],["__scopeId","data-v-3408f04b"]]);var it=at;const ot=(0,d.Uk)(" Add city ");function nt(t,e,a,o,n,r){const s=(0,d.up)("my-input"),c=(0,d.up)("my-button");return(0,d.wg)(),(0,d.iD)("form",{onSubmit:e[1]||(e[1]=(0,i.iM)((()=>{}),["prevent"]))},[(0,d.Wm)(s,{modelValue:n.city,"onUpdate:modelValue":e[0]||(e[0]=t=>n.city=t),placeholder:"City.."},null,8,["modelValue"]),(0,d.Wm)(c,{onClick:r.addCity},{default:(0,d.w5)((()=>[ot])),_:1},8,["onClick"])],32)}var rt={data(){return{city:""}},methods:{addCity(){this.$emit("addNewCity",this.city),this.city=""}}};const st=(0,E.Z)(rt,[["render",nt],["__scopeId","data-v-74fe3bfc"]]);var dt=st,ct={components:{cardForm:dt,cardList:J,cardListSmall:it},data(){return{key:"dba55fd614108fa2ca462f1c39c6a76b",url:"https://api.openweathermap.org/data/2.5/",unit:"metric",isLoading:!1,cards:[],dialogVisible:!1,location:null,gettingLocation:!1,errorStr:null}},methods:{async fetchWeather(t){try{this.isLoading=!0;const e=await p().get(`${this.url}weather`,{params:{q:t,units:this.unit,appid:this.key}});this.addCity(e.data)}catch(e){alert("Error")}finally{this.isLoading=!1}},async fetchWeather2(){try{this.isLoading=!0;const t=await p().get(`${this.url}weather`,{params:{lat:this.location.coords.latitude,lon:this.location.coords.longitude,units:this.unit,appid:this.key}});this.addCity(t.data)}catch(t){alert("Error")}finally{this.isLoading=!1}},addCity(t){const e={id:Date.now(),city:t.name,data:t};this.cards.push(e),this.saveLocal()},removeCity(t){this.cards=this.cards.filter((e=>e.id!==t.id)),this.saveLocal()},showDialog(){this.dialogVisible=!0},resortCity(t){console.log("app -----"),console.log(t),this.cards=t,this.saveLocal()},async getLocation(){return new Promise(((t,e)=>{"geolocation"in navigator||e(new Error("Geolocation is not available.")),navigator.geolocation.getCurrentPosition((e=>{t(e)}),(t=>{e(t)}))}))},async locateMe(){this.gettingLocation=!0;try{this.gettingLocation=!1,this.location=await this.getLocation()}catch(t){this.gettingLocation=!1,this.errorStr=t.message}finally{this.fetchWeather2()}},saveLocal(){console.log("Saving new value of cards (citys)");const t=JSON.stringify(this.cards);localStorage.setItem("cards",t)}},mounted(){if(localStorage.getItem("cards"))try{this.cards=JSON.parse(localStorage.getItem("cards"))}catch(t){localStorage.removeItem("cards")}else this.locateMe()}};const lt=(0,E.Z)(ct,[["render",m]]);var ut=lt;const mt={class:"btn"};function ht(t,e,a,i,o,n){return(0,d.wg)(),(0,d.iD)("button",mt,[(0,d.WI)(t.$slots,"default")])}var pt={name:"my-button"};const ft=(0,E.Z)(pt,[["render",ht]]);var gt=ft;const vt=["value"];function yt(t,e,a,i,o,n){return(0,d.wg)(),(0,d.iD)("input",{value:a.modelValue,onInput:e[0]||(e[0]=(...t)=>n.updateInput&&n.updateInput(...t)),class:"input",type:"text"},null,40,vt)}var wt={name:"my-input",props:{modelValue:[String]},methods:{updateInput(t){this.$emit("update:modelValue",t.target.value)}}};const _t=(0,E.Z)(wt,[["render",yt]]);var bt=_t;function Ct(t,e,a,o,n,r){return a.show?((0,d.wg)(),(0,d.iD)("div",{key:0,class:"dialog",onClick:e[1]||(e[1]=(0,i.iM)(((...t)=>r.hideDialog&&r.hideDialog(...t)),["stop"]))},[(0,d._)("div",{onClick:e[0]||(e[0]=(0,i.iM)((()=>{}),["stop"])),class:"dialog_content"},[(0,d.WI)(t.$slots,"default")])])):(0,d.kq)("",!0)}var kt={name:"my-dialog",props:{show:{type:Boolean,defaults:!1}},methods:{hideDialog(){this.$emit("update:show",!1)}}};const Dt=(0,E.Z)(kt,[["render",Ct]]);var Lt=Dt,It=[gt,bt,Lt];o.vI.add(n.Vui,r.xiG);const St=(0,i.ri)(ut);It.forEach((t=>{St.component(t.name,t)})),St.component("fa",s.GN).mount("#app")}},e={};function a(i){var o=e[i];if(void 0!==o)return o.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,i,o,n){if(!i){var r=1/0;for(l=0;l<t.length;l++){i=t[l][0],o=t[l][1],n=t[l][2];for(var s=!0,d=0;d<i.length;d++)(!1&n||r>=n)&&Object.keys(a.O).every((function(t){return a.O[t](i[d])}))?i.splice(d--,1):(s=!1,n<r&&(r=n));if(s){t.splice(l--,1);var c=o();void 0!==c&&(e=c)}}return e}n=n||0;for(var l=t.length;l>0&&t[l-1][2]>n;l--)t[l]=t[l-1];t[l]=[i,o,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,n,r=i[0],s=i[1],d=i[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(d)var l=d(a)}for(e&&e(i);c<r.length;c++)n=r[c],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(l)},i=self["webpackChunkvue_weather_widget"]=self["webpackChunkvue_weather_widget"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(8768)}));i=a.O(i)})();
//# sourceMappingURL=app.8d0001d6.js.map